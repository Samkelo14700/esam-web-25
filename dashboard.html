<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESAM Ministries - Member Dashboard</title>
    <link rel="stylesheet" href="main.css">
    <style>
        .dashboard-container {
            padding: 40px 0;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .dashboard-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .welcome-message {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .member-since {
            color: #666;
            font-size: 1.1rem;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .dashboard-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 25px;
        }
        
        .card-title {
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent);
        }
        
        .user-info p {
            margin: 15px 0;
            display: flex;
        }
        
        .user-info strong {
            width: 150px;
            display: inline-block;
        }
        
        .member-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <header>
        <!-- Same header as index.html -->
    </header>

    <section class="dashboard-container">
        <div class="dashboard-header">
            <h2 class="welcome-message">Welcome, <span id="dashboard-username">Member</span>!</h2>
            <p class="member-since">Member since <span id="join-date">January 2023</span></p>
        </div>
        
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <h3 class="card-title">Your Profile</h3>
                <div class="user-info">
                    <p><strong>Full Name:</strong> <span id="profile-name">John Doe</span></p>
                    <p><strong>Email:</strong> <span id="profile-email">john@example.com</span></p>
                    <p><strong>Member ID:</strong> <span id="member-id">ESAM-00123</span></p>
                    <p><strong>Membership Level:</strong> <span id="member-level" style="color: var(--accent); font-weight: bold;">Premium</span></p>
                    <p><strong>Last Login:</strong> <span id="last-login">Today at 10:30 AM</span></p>
                </div>
                <div class="member-actions">
                    <button class="btn btn-outline">Edit Profile</button>
                    <button class="btn btn-outline">Change Password</button>
                </div>
            </div>
            
            <div class="dashboard-card">
                <h3 class="card-title">Membership Benefits</h3>
                <ul>
                    <li>Exclusive access to all ESAM resources</li>
                    <li>Free admission to special events</li>
                    <li>Monthly newsletter with ministry updates</li>
                    <li>Discounts on ESAM merchandise</li>
                    <li>Priority prayer request handling</li>
                </ul>
                <div class="member-actions">
                    <button class="btn btn-primary">View Resources</button>
                </div>
            </div>
            
            <div class="dashboard-card">
                <h3 class="card-title">Account Actions</h3>
                <div class="member-actions" style="flex-direction: column; gap: 10px;">
                    <button class="btn btn-outline">View Giving History</button>
                    <button class="btn btn-outline">Update Payment Method</button>
                    <button class="btn btn-outline">Download Tax Documents</button>
                    <button id="dashboard-logout-btn" class="btn btn-primary">Logout</button>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <!-- Same footer as index.html -->
    </footer>

    <script src="app.js"></script>
    <script>
        // Dashboard specific script
        document.addEventListener('DOMContentLoaded', () => {
            const user = JSON.parse(localStorage.getItem('esam_current_user'));
            if (user) {
                document.getElementById('dashboard-username').textContent = user.name;
                document.getElementById('profile-name').textContent = user.name;
                document.getElementById('profile-email').textContent = user.email;
                document.getElementById('join-date').textContent = user.joinDate;
                document.getElementById('member-id').textContent = user.id;
                document.getElementById('membership-level').textContent = user.membershipLevel;
                
                // Set last login time
                const lastLoginDate = new Date(user.lastLogin);
                document.getElementById('last-login').textContent = lastLoginDate.toLocaleString();
            } else {
                // Redirect to login if not authenticated
                window.location.href = 'index.html';
            }
            
            // Logout button
            document.getElementById('dashboard-logout-btn').addEventListener('click', () => {
                logoutUser();
                window.location.href = 'index.html';
            });
        });
        
        // Reusable functions from app.js
        function getCurrentUser() {
            const userData = localStorage.getItem('esam_current_user');
            return userData ? JSON.parse(userData) : null;
        }
        
        function logoutUser() {
            localStorage.removeItem('esam_current_user');
        }
    </script>
</body>
</html>